<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Collection - Sua Loja de Impressão 3D</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>
</head>
<body>

    <header>
        <div class="top-bar">
            <div class="container">
                <!-- A barra superior pode ser usada para outras informações ou removida se não for mais necessária -->
            </div>
        </div>
        <div class="main-header">
            <div class="container">
                <a href="#" onclick="showHomePage()" class="logo-container">
                    <img src="collection.png" alt="Logo 3D Collection" class="logo">
                </a>
                <div class="search-container">
                    <form id="search-form">
                        <input type="text" id="search-input" placeholder="Busque por vasos, action figures e mais...">
                        <button type="submit" id="search-button"><i class="fas fa-search"></i></button>
                    </form>
                </div>
                <div class="header-actions">
                    <nav class="auth-nav">
                        <a href="#" class="auth-link" id="register-link">Cadastrar</a>
                        <a href="#" class="auth-link" id="login-link">Entrar</a>
                        <div id="user-profile-area" style="display: none;">
                            <span id="welcome-message"></span>
                            <a href="#" id="logout-link">Sair</a>
                        </div>
                    </nav>
                    <div id="user-avatar" style="display: none;">
                        <img id="avatar-pic" src="" alt="Avatar">
                    </div>
                    <div class="cart-icon" id="cart-icon">
                        <i class="fas fa-shopping-cart"></i>
                        <span id="cart-count">0</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <section id="home-page">
        <div class="slider-container">
            <div class="slider">
                <div class="slide">
                    <img src="images/banner1.jpg" alt="Banner Promocional 1">
                    <div class="slide-caption"><h2>Impressões com Qualidade Superior</h2><p>Conheça nossos produtos feitos com a melhor tecnologia 3D.</p></div>
                </div>
                <div class="slide">
                    <img src="images/banner2.jpg" alt="Banner Promocional 2">
                    <div class="slide-caption"><h2>Decoração e Estilo</h2><p>Itens exclusivos para transformar seu ambiente.</p></div>
                </div>
            </div>
            <button id="prevBtn" class="slider-btn prev">&#10094;</button>
            <button id="nextBtn" class="slider-btn next">&#10095;</button>
        </div>
        <div class="container">
            <h2 class="section-title">Produtos em Destaque</h2>
            <div id="featured-products-grid" class="product-grid"></div>
            <div class="cta-container"><button class="cta-button" id="see-all-products-btn">Ver todos os produtos</button></div>
        </div>
    </section>

    <div id="shop-page" style="display: none;">
        <main class="container">
            <aside class="sidebar">
                <h3>Categorias</h3>
                <ul id="category-list">
                    <li><a href="#" data-category="todos">Todos</a></li>
                    <li><a href="#" data-category="decoracao">Decoração</a></li>
                    <li><a href="#" data-category="figuras">Action Figures</a></li>
                    <li><a href="#" data-category="utilitarios">Utilitários</a></li>
                </ul>
                <h3>Siga-nos</h3>
                <div class="social-links">
                    <a href="https://www.instagram.com/collection_3d_?igsh=MXVyaGo5ZWc1dDF5cA%3D%3D&utm_source=qr" target="_blank" title="Instagram">
                        <img src="instagram.png" alt="Instagram">
                    </a>
                    <a href="https://wa.me/5511999999999" target="_blank" title="WhatsApp">
                        <img src="whatsapp.png" alt="WhatsApp">
                    </a>
                </div>
                <div class="theme-switcher">
                    <span>Modo Escuro</span>
                    <label class="switch">
                        <input type="checkbox" id="theme-toggle">
                        <span class="slider round"><i class="fas fa-sun sun-icon"></i><i class="fas fa-moon moon-icon"></i></span>
                    </label>
                </div>
            </aside>
            <section class="product-grid" id="product-grid"></section>
        </main>
    </div>

    <div id="cart-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" data-close-modal="cart-modal">&times;</span>
            <h2>Seu Carrinho</h2>
            <div id="cart-items"></div>
            <div class="cart-total"><strong>Total: R$ <span id="cart-total">0.00</span></strong></div>
            <button class="checkout-btn-uiverse" id="show-checkout-btn"><span class="text">Finalizar compra</span><span>Obrigado!</span></button>
        </div>
    </div>

    <div id="checkout-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" data-close-modal="checkout-modal">&times;</span>
            <h2>Finalizar Compra</h2>
            <form id="checkout-form">
                <h3>Seus Dados</h3>
                <div class="form-row"><input type="text" id="name" placeholder="Nome Completo" required><input type="tel" id="phone" placeholder="Número de Telefone (com DDD)" required></div>
                <h3>Endereço de Entrega</h3>
                <input type="text" id="address" placeholder="Rua, Número, Bairro" required>
                <div class="form-row"><input type="text" id="city" placeholder="Cidade / Estado" required><input type="text" id="zipcode" placeholder="CEP" required></div>
                <div id="payment-step" style="display: none;">
                    <h3>Pedido Gerado!</h3>
                    <p>Seu resumo do pedido foi gerado. Clique no botão abaixo para enviá-lo diretamente para nós via WhatsApp e finalizar sua compra.</p>
                    <textarea id="order-summary" readonly style="display: none;"></textarea>
                    <button type="button" class="whatsapp-button" onclick="sendOrderToWhatsApp()"><i class="fab fa-whatsapp"></i> Enviar Pedido para o WhatsApp</button>
                </div>
                <button type="submit" id="submit-checkout-btn">Confirmar Dados e Gerar Pedido</button>
            </form>
        </div>
    </div>

    <div id="product-detail-modal" class="modal">
        <div class="modal-content detail-modal-content">
            <span class="close-button" data-close-modal="product-detail-modal">&times;</span>
            <div class="detail-content">
                <div class="product-images"><img id="product-detail-main-image" src="" alt="Imagem do Produto"><div class="thumbnail-gallery" id="product-detail-gallery"></div></div>
                <div class="product-info"><h2 id="product-detail-name">Nome do Produto</h2><p class="price" id="product-detail-price">R$ 0.00</p><p class="description" id="product-detail-description"></p><button id="detail-add-to-cart-btn" class="add-to-cart-btn">Adicionar ao Carrinho</button></div>
            </div>
        </div>
    </div>

    <div id="register-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" data-close-modal="register-modal">&times;</span>
            <h2>Crie sua Conta</h2>
            <form id="register-form">
                <h3>Dados Pessoais</h3>
                <input type="text" name="nomeCompleto" placeholder="Nome Completo" required>
                <div class="form-row"><input type="email" name="email" placeholder="E-mail" required><input type="tel" name="telefone" placeholder="Telefone" required></div>
                <h3>Endereço</h3>
                <div class="form-row"><input type="text" name="cep" placeholder="CEP" required><input type="text" name="pais" placeholder="País" value="Brasil" required></div>
                <input type="text" name="rua" placeholder="Rua" required>
                <div class="form-row"><input type="text" name="numero" placeholder="Número" required><input type="text" name="bairro" placeholder="Bairro" required></div>
                <div class="form-row"><input type="text" name="cidade" placeholder="Cidade" required><input type="text" name="complemento" placeholder="Complemento (Opcional)"></div>
                <h3>Foto de Perfil (Opcional)</h3>
                <input type="file" name="avatar" id="avatar-upload" accept="image/*">
                <button type="submit" class="cta-button">Salvar Cadastro</button>
            </form>
        </div>
    </div>
    
    <div id="login-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" data-close-modal="login-modal">&times;</span>
            <h2>Entrar</h2>
            <form id="login-form">
                <input type="email" id="login-email" placeholder="Seu e-mail de cadastro" required>
                <button type="submit" class="cta-button">Entrar</button>
                <p>Ainda não tem conta? <a href="#" id="go-to-register-link">Cadastre-se</a></p>
            </form>
        </div>
    </div>

    <div id="cookie-banner" class="cookie-banner">
        <div class="cookie-content">
            <p class="cookie-text">Ao clicar em "Aceitar todos os cookies", você concorda com o armazenamento de cookies no seu dispositivo para melhorar a navegação no site e analisar a utilização do site.</p>
            <div class="cookie-actions">
                <a href="#" class="cookie-link">Definições dos cookies</a>
                <button id="accept-cookies-btn" class="cookie-button">Aceitar todos os cookies</button>
            </div>
        </div>
        <button id="close-cookies-btn" class="cookie-close">&times;</button>
    </div>

    <script>
        // Adiciona os event listeners que foram removidos do HTML
        document.addEventListener('DOMContentLoaded', () => {
            // Links de autenticação
            document.getElementById('register-link').addEventListener('click', (e) => { e.preventDefault(); showRegisterModal(); });
            document.getElementById('login-link').addEventListener('click', (e) => { e.preventDefault(); showLoginModal(); });
            document.getElementById('logout-link').addEventListener('click', (e) => { e.preventDefault(); logout(); });
            document.getElementById('go-to-register-link').addEventListener('click', (e) => {
                e.preventDefault();
                closeLoginModal();
                showRegisterModal();
            });

            // Ações do cabeçalho e CTA
            document.getElementById('cart-icon').addEventListener('click', toggleCart);
            document.getElementById('see-all-products-btn').addEventListener('click', () => filterProducts('todos'));

            // Filtros de categoria
            document.getElementById('category-list').addEventListener('click', (e) => {
                if (e.target.tagName === 'A' && e.target.dataset.category) {
                    e.preventDefault();
                    filterProducts(e.target.dataset.category);
                }
            });

            // Ações do carrinho e checkout
            document.getElementById('show-checkout-btn').addEventListener('click', showCheckout);

            // Fechar modais
            document.querySelectorAll('.close-button').forEach(button => {
                button.addEventListener('click', () => {
                    const modalId = button.dataset.closeModal;
                    if (modalId) {
                        document.getElementById(modalId).style.display = 'none';
                    }
                });
            });
        });
    </script>
    <script src="script.js" defer></script>
</body>
</html>